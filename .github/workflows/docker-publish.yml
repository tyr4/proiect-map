- name: Check Docker secrets
  run: |
    if [ -z "$DOCKERHUB_USERNAME" ] || [ -z "$DOCKERHUB_TOKEN" ]; then
      echo "ERROR: Missing Docker secrets. Ensure DOCKERHUB_USERNAME and DOCKERHUB_TOKEN are set."
      exit 1
    fi
  env:
    DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
    DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

- name: Log in to Docker Hub
  uses: docker/login-action@v3
  with:
    registry: docker.io
    username: ${{ secrets.DOCKERHUB_USERNAME || secrets.DOCKER_USERNAME }}
    password: ${{ secrets.DOCKERHUB_TOKEN || secrets.DOCKER_PASSWORD }}